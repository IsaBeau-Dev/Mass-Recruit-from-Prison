namespace = mrfp_set_threshold


mrfp_set_threshold.0001 = {
  title = mrfp_set_threshold.0001.t
  theme = martial
  desc = {
    desc = mrfp_set_threshold.0001.settings.t
    first_valid = {
      triggered_desc = {
        trigger = {
          var:mrfp_threshold_enabled = 1
        }
        desc = mrfp_set_threshold.0001.enabled
      }
      desc = mrfp_set_threshold.0001.disabled
    }
    desc = mrfp_set_threshold.0001.prowess.t
    first_valid = {
      triggered_desc = {
        trigger = {
          var:mrfp_prowess_threshold = 6
        }
        desc = mrfp_set_threshold.0001.prowess.6
      }
      triggered_desc = {
        trigger = {
          var:mrfp_prowess_threshold = 8
        }
        desc = mrfp_set_threshold.0001.prowess.8
      }
      triggered_desc = {
        trigger = {
          var:mrfp_prowess_threshold = 10
        }
        desc = mrfp_set_threshold.0001.prowess.10
      }
      triggered_desc = {
        trigger = {
          var:mrfp_prowess_threshold = 12
        }
        desc = mrfp_set_threshold.0001.prowess.12
      }
      triggered_desc = {
        trigger = {
          var:mrfp_prowess_threshold = 16
        }
        desc = mrfp_set_threshold.0001.prowess.16
      }
      triggered_desc = {
        trigger = {
          var:mrfp_prowess_threshold = 20
        }
        desc = mrfp_set_threshold.0001.prowess.20
      }
      triggered_desc = {
        trigger = {
          var:mrfp_prowess_threshold = 24
        }
        desc = mrfp_set_threshold.0001.prowess.24
      }
    }
  }

  left_portrait = {
    character = root
    animation = personality_cynical
  }

  immediate = {
    if = {
      limit = {
        NOT = { has_variable = mrfp_threshold_enabled }
      }
      set_variable = { 
        name = mrfp_threshold_enabled
        value = 1
      }
    }
    if = {
      limit = {
        NOT = { has_variable =  mrfp_prowess_threshold }
      }
      set_variable = { 
        name =  mrfp_prowess_threshold
        value = 16
      }
    }
    #vanilla prison recruitment options => default case will be recruit and convert!
    # mrfp_RELEASE_DEMAND_CONVERSION
    if = {
      limit = {
        NOT = { has_variable =  mrfp_RELEASE_DEMAND_CONVERSION }
      }
      set_variable = { 
        name =  mrfp_RELEASE_DEMAND_CONVERSION
        value = yes
      }
    }
    #mrfp_RELEASE_RENOUNCE_CLAIMS
    if = {
      limit = {
        NOT = { has_variable =  mrfp_RELEASE_RENOUNCE_CLAIMS }
      }
      set_variable = { 
        name =  mrfp_RELEASE_RENOUNCE_CLAIMS
        value = no
      }
    }
    #mrfp_RELEASE_BANISH
    if = {
      limit = {
        NOT = { has_variable =  mrfp_RELEASE_BANISH }
      }
      set_variable = { 
        name =  mrfp_mrfp_RELEASE_BANISH
        value = no
      }
    }
    #mrfp_RELEASE_GAIN_HOOK
    if = {
      limit = {
        NOT = { has_variable =  mrfp_RELEASE_GAIN_HOOK }
      }
      set_variable = { 
        name =  mrfp_RELEASE_GAIN_HOOK
        value = no
      }
    }
    # mrfp_RELEASE_TAKE_VOWS
    if = {
      limit = {
        NOT = { has_variable =  mrfp_RELEASE_TAKE_VOWS }
      }
      set_variable = { 
        name =  mrfp_RELEASE_TAKE_VOWS
        value = no
      }
    }
    #mrfp_RELEASE_AS_EXECUTIONER
    if = {
      limit = {
        NOT = { has_variable =  mrfp_RELEASE_AS_EXECUTIONER }
      }
      set_variable = { 
        name =  mrfp_RELEASE_AS_EXECUTIONER
        value = no
      }
    }
    #mrfp_RELEASE_RECRUIT
    if = {
      limit = {
        NOT = { has_variable =  mrfp_RELEASE_RECRUIT }
      }
      set_variable = { 
        name =  mrfp_RELEASE_RECRUIT
        value = yes
      }
    }
    #mrfp_RELEASE_DISFIGURE
    if = {
      limit = {
        NOT = { has_variable =  mrfp_RELEASE_DISFIGURE }
      }
      set_variable = { 
        name =  mrfp_RELEASE_DISFIGURE
        value = no
      }
    }
    #mrfp_RELEASE_BLIND
    if = {
      limit = {
        NOT = { has_variable =  mrfp_RELEASE_BLIND }
      }
      set_variable = { 
        name =  mrfp_RELEASE_BLIND
        value = no
      }
    }
    #mrfp_RELEASE_CASTRATE
    if = {
      limit = {
        NOT = { has_variable =  mrfp_RELEASE_CASTRATE }
      }
      set_variable = { 
        name =  mrfp_RELEASE_CASTRATE
        value = no
      }
    }
    ###Was this Event Called?
    if = {
      limit = {
        NOT = { has_variable =  mrfp_initialized_vars }
      }
      set_variable = { 
        name =  mrfp_initialized_vars
        value = yes
      }
    }
  }

  #set threshold
  option = {
    name = mrfp_set_threshold.0001.a
    switch = {
      trigger = var:mrfp_threshold_enabled
      0 = { 
        set_variable = { 
          name = mrfp_threshold_enabled
          value = 1
        }
      } 
      1 = { 
        set_variable = { 
          name = mrfp_threshold_enabled
          value = 0
        }
      } 
    }
    trigger_event = mrfp_set_threshold.0001
  }

  #set prowess limit
  option = {
    name = mrfp_set_threshold.0001.b
    switch = {
      trigger = var:mrfp_prowess_threshold
      6 = { 
        set_variable = { 
          name =  mrfp_prowess_threshold
          value = 8
        }
      }
      8 = { 
        set_variable = { 
          name =  mrfp_prowess_threshold
          value = 10
        }
      }
      10 = { 
        set_variable = { 
          name =  mrfp_prowess_threshold
          value = 12
        }
      }
      12 = { 
        set_variable = { 
          name =  mrfp_prowess_threshold
          value = 16
        }
      } 
      16 = { 
        set_variable = { 
          name =  mrfp_prowess_threshold
          value = 20
        }
      } 
      20 = { 
        set_variable = { 
          name =  mrfp_prowess_threshold
          value = 24
        }
      }
      24 = { 
        set_variable = { 
          name =  mrfp_prowess_threshold
          value = 6
        }
      }  
    }
    trigger_event = mrfp_set_threshold.0001
  }
  option = {
    name = mrfp_set_threshold.0001.d
  }
}
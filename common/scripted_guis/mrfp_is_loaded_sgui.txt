mrfp_is_loaded_sgui = {
  scope = character
  is_shown = {
      #exists = global_var:mrfp_is_loaded
    has_global_variable = mrfp_is_loaded
  }
  # is_valid = {
  #     #exists = global_var:mrfp_is_loaded
  #   has_global_variable = mrfp_is_loaded
  # }
  effect = {
    every_prisoner = {
      mrfp_every_prisoner_effect = {
        MRFPROOT = root
        MRFPTHIS = this
      }
    }
  }
}
mrfp_is_loaded_sgui_ransom = {
  scope = character
  is_shown = {
      #exists = global_var:mrfp_is_loaded
    has_global_variable = mrfp_is_loaded
  }
  # is_valid = {
  #     #exists = global_var:mrfp_is_loaded
  #   has_global_variable = mrfp_is_loaded
  # }
  effect = {
    every_prisoner = {
      mrfp_ransom_every_prisoner_effect = {
        MRFPROOT = root
        MRFPTHIS = this
      }
    }
  }
}

#temp window stuff
toggle_my_window = {
  effect = {
      if = {
          limit = {
              has_variable = show_my_window
          }
          remove_variable = show_my_window
      }
      else = {
          set_variable = show_my_window
      }
  }
}
mrfp_prison_window_ransom = {
  scope = character
  is_shown = {
    scope:target = {
			save_temporary_scope_as = secondary_recipient
			if = {
				limit = {
					is_ruler = no
					exists = liege
				}
				liege = {
					save_temporary_scope_as = target
				}
			}
		}
    scope:secondary_recipient.ransom_cost_value <= scope:target.gold
  } 
  effect = {
    scope:target = {
			save_scope_as = secondary_recipient
			if = {
				limit = {
					is_ruler = no
					exists = liege
				}
				liege = {
					save_scope_as = target
				}
			}
		}
    if = {
      limit = {
        #exists = scope:target
        scope:secondary_recipient.ransom_cost_value <= scope:target.gold 
      }
      send_interface_message = {
        type = event_captured_combatants_good
        title = "Debug test"
        desc = "I managed to come here"						  
      }
    }
  }

}
# mrfp_settings_window_Demand_Conversion = {
#   effect = {
#     # onclick = "[GetScriptedGui('mrfp_is_loaded_sgui_ransom').Execute(GuiScope.SetRoot(GetPlayer.MakeScope).End)]"
#     root.var:mrfp_story.var:mrfp_RELEASE_DEMAND_CONVERSION
#   }
# }
mrfp_recruitment_cycle = {
    on_setup = {
        # Core recruitment settings
        set_variable = {
            name = mrfp_threshold_enabled
            value = 0
        }
        set_variable = {
            name = mrfp_prowess_threshold
            value = 16
        }

        # Release options configuration
        set_variable = { name = mrfp_RELEASE_DEMAND_CONVERSION value = yes }
        set_variable = { name = mrfp_RELEASE_RECRUIT value = yes }
        set_variable = { name = mrfp_RELEASE_RENOUNCE_CLAIMS value = no }
        set_variable = { name = mrfp_RELEASE_BANISH value = no }
        set_variable = { name = mrfp_RELEASE_GAIN_HOOK value = no }
        set_variable = { name = mrfp_RELEASE_TAKE_VOWS value = no }
        set_variable = { name = mrfp_RELEASE_AS_EXECUTIONER value = no }
        set_variable = { name = mrfp_RELEASE_DISFIGURE value = no }
        set_variable = { name = mrfp_RELEASE_BLIND value = no }
        set_variable = { name = mrfp_RELEASE_CASTRATE value = no }

        # Additional tracking variables
        set_variable = { name = mrfp_total_recruited value = 0 }
        set_variable = { name = mrfp_total_ransomed value = 0 }
    }

    on_end = {
		end_story = yes
    }

    on_owner_death = {

		debug_log = "Total prisoners recruited: [THIS.Var('mrfp_total_recruited').GetValue]"
		debug_log = "Total prisoners ransomed: [THIS.Var('mrfp_total_ransomed').GetValue]"

		#Transfer ownership
		make_story_owner = story_owner.primary_heir

    }

    # Montlhly recruitment cycle
    # effect_group = {
    #     months = 1

        # trigger = {
		# 	story_owner = {
        #     has_character_flag = enable_auto_mrfp
		# 	}
        # }

    #     triggered_effect = {
    #         trigger = {
    #             any_prisoner = {
    #                 prowess >= story_owner.var:mrfp_prowess_threshold
    #             }
    #         }
    #         effect = {
    #             every_prisoner = {
    #                 limit = {
    #                     prowess >= story_owner.var:mrfp_prowess_threshold
    #                 }
    #                 mrfp_every_prisoner_effect = {
    #                     MRFPROOT = story_owner
    #                     MRFPTHIS = this
    #                 }
                    
    #                 # Update recruitment counter
    #                 story_owner = {
    #                     change_variable = {
    #                         name = mrfp_total_recruited
    #                         add = 1
    #                     }
    #                 }
    #             }
    #         }
    #     }
    # }

    # # Monthly ransom cycle
    # effect_group = {
    #     months = 1

    #     trigger = {
    #         has_character_flag = enable_auto_mrfp_ransom
    #     }

    #     triggered_effect = {
    #         trigger = {
    #             any_prisoner = {
    #                 # Add specific ransom conditions if needed
    #                 always = yes
    #             }
    #         }
    #         effect = {
    #             every_prisoner = {
    #                 mrfp_ransom_every_prisoner_effect = {
    #                     MRFPROOT = story_owner
    #                     MRFPTHIS = this
    #                 }
                    
    #                 # Update ransom counter
    #                 story_owner = {
    #                     change_variable = {
    #                         name = mrfp_total_ransomed
    #                         add = 1
    #                     }
    #                 }
    #             }
    #         }
    #     }
    # }

















    # # # Additional periodic checks and maintenance
    # # effect_group = {
    # #     years = 1

    # #     trigger = {
    # #         var:mrfp_threshold_enabled = 1
    # #     }

    # #     triggered_effect = {
    # #         trigger = {
    # #             # Any additional periodic maintenance conditions
    # #             always = yes
    # #         }
    # #         effect = {
    # #             # Periodic maintenance or logging
    # #             if = {
    # #                 limit = { 
    # #                     NOT = { has_character_flag = enable_auto_mrfp }
    # #                     var:mrfp_total_recruited > 0
    # #                 }
    # #                 add_character_flag = enable_auto_mrfp
    # #             }
    # #         }
    # #     }
    # # }
}
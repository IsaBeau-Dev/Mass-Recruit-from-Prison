on_game_start = {
    on_actions = {
        on_mrfp_start
    }
}
on_mrfp_start = {
    effect = {
        set_global_variable = {
		    name = mrfp_is_loaded
		    value = yes
		}
    }
}

quarterly_playable_pulse = {
    #this setup makes sure mrfp_auto gets called every month
    on_actions = {
        mrfp_auto
        delay = { months = 1 }
        mrfp_auto
        delay = { months = 2 }
        mrfp_auto
    }
}

mrfp_auto = {
    trigger = {
        has_character_flag = enable_auto_mrfp
    }
    effect = {
        every_prisoner = {
            mrfp_every_prisoner_effect = {
                MRFPROOT = root
                MRFPTHIS = this
            }
          }
    }
}
on_death = {
    on_actions = {
        mrfp_on_death
    }
}

mrfp_on_death = {
    trigger = {
        has_character_flag = enable_auto_mrfp
    }
    effect = {
        #save_scope_as = dying_character
        primary_heir = {
            add_character_flag = enable_auto_mrfp
        }
        
    }
}